%table
  %tr
    %th &nbsp;
    - @columns.each do |column|
      - is_current_sort = column == params[:sort]
      %th
        = link_to column,
          url_for(:sort => column,
            :order => @sort_order || !is_current_sort ? nil : "d")
        - if is_current_sort
          - if @sort_order
            = link_to image_tag("up_arrow.gif"), url_for(:order => nil)
          - else
            = link_to image_tag("down_arrow.gif"), url_for(:order => "d")
  - @rankings.each do |ranking|
    - port = ranking.port
    - game = port.game
    %tr
      %td
        = link_to amazon_image(port, "SL40"), game, :class => 'leftImage'
      %td
        = link_to port.title, game
      %td
        = link_to_ar(port.platform)
      %td
        = pluralize game.rankings_count, "ranking"
      %td
        = game.average_ranking
      %td
        - (ranking.ranking || 0).times do
          = image_tag('star_lit.png')
      %td
        = link_to "view", ranking
        = link_to "edit", edit_ranking_path(ranking)
= will_paginate @rankings