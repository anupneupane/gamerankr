- @title = "#{@port.title} - Edit My Review"
.breadCrumbs
  = link_to "My Games", my_games_path
%h1
  = link_to @port.title, @port
  &gt;
  = link_to "My Review", @ranking
  &gt;
  Edit
= link_to port_image(@port, "SX140"), @port.game
= error_messages_for :ranking
= form_for(@ranking, :builder => EasyFormBuilder) do |f|
  %div
    = f.label :ranking
    = f.hidden_field :ranking
    = render 'rankings/stars', :ranking_num => @ranking.ranking
  .shelves
    = f.label :shelves
    %span#added
      = f.fields_for :ranking_shelves do |f2|
        - shelf = f2.object.shelf
        %span{:id => "shelf#{shelf.id}"}
          = f2.hidden_field :shelf_id
          %a.addShelf{:shelf_id => shelf.id, :shelf_name => shelf.name}
            = shelf.name
          = f2.hidden_field :_destroy, :class => "destroy"
    %div{:onmouseover => "$(this).down('div').show()", :onmouseout => "$(this).down('div').hide()"}
      %a{:href => '#', :onclick => 'return false'} Add
      .chooseShelves{:style => 'display:none'}
        - current_shelves.each do |shelf|
          %a.addShelf{:shelf_id => shelf.id, :shelf_name => shelf.name}
            = shelf.name
  = f.text_area :review
  = f.calendar_date_select :started_at,
    :time => false,
    :year_range => 40.years.ago..0.years.from_now
  = f.calendar_date_select :finished_at,
    :time => false,
    :year_range => 40.years.ago..0.years.from_now
  = f.check_box :post_to_facebook
  = f.submit 'Save', :class => "button"

= link_to "delete my review",
  @ranking,
  :method => 'delete',
  :confirm => "This will remove this game from your games list, are you sure?"

= javascript_include_tag 'one_offs/edit_review.js'

